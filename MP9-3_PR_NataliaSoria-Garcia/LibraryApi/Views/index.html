<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biblioteca Virtual</title>
    <link rel="stylesheet" href="../public/css/styles.css" />
</head>
<body>
    <div class="app-container">

        <aside class="sidebar">
            <nav>
                <a href="index.html"><img src="../public/img/logo.png" alt="logo"></a>
                <ul>
                    <li><a href="categoria.html">Libros</a></li>
                    <li><a href="#">Actuales</a></li>
                    <li><a href="#">Favoritos</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">

            <header class="main-header">
                <input type="text" placeholder="Buscar..." class="search-bar" />
                <div class="nav-buttons">
                    <a href="#">üîç</a>
                    <div class="user-menu">
                        <a href="#" class="user-icon">üë§</a>
                        <div class="dropdown-menu">
                            <a href="#">Iniciar sesi√≥n</a>
                            <a href="#">Registrarse</a>
                        </div>
                    </div>
                    <a href="FQ.html">F&Q</a>
                    <div class="cerrar-sesion">
                        <a href="#">
                            <img src="../public/img/cerrar-sesion.png" alt="icono cerrar sesion">
                        </a>
                    </div>
                </div>
            </header>

            <section class="category-section">
                <h2>Categoria 1</h2>
                <div class="book-grid"></div>
            </section>

            <section class="category-section">
                <h2>Categoria 2</h2>
                <div class="book-grid"></div>
            </section>

        </main>
    </div>

    <script src="../public/js/index.js"></script>
    <script>
        
        // Funci√≥n para obtener los libros desde la API
        async function fetchBooks() {
            try {
                const response = await fetch('http://localhost:5129/LibraryItems');
                if (!response.ok) {
                    throw new Error('Error al obtener los libros');
                }
                const books = await response.json();

                const category1Container = document.querySelector('.category-section:nth-of-type(1) .book-grid');
                category1Container.innerHTML = ''; 

                books.forEach(book => { 
                    const bookCard = document.createElement('div');
                    bookCard.classList.add('book-card');
                    bookCard.innerHTML = `
                        <img src="${book.urlcover}" alt="${book.title}" class="book-cover">
                        <h3>${book.title}</h3>
                        <p>${book.author}</p>
                        <p>A√±o: ${book.publishedDate}</p>
                    `;
                    category1Container.appendChild(bookCard);
                });
            } catch (error) {
                console.error('Error:', error);
            }
        }
        fetchBooks();

    </script>
</body>
</html>